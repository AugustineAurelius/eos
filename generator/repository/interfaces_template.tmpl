//Code generated by generator, DO NOT EDIT.
package {{.PackageName}}

import (
	"context"

	"github.com/AugustineAurelius/eos/pkg/generics"
	sq "github.com/Masterminds/squirrel"
)

// builderParams represents optional query parameters.
type BuilderParams struct {
	OrderBy   *string // Column and direction for sorting (e.g., "id ASC")
	SearchCol *string // Column to search in (e.g., "name")
	SearchTerm *string // Term to search for (e.g., "alice")
	Offset    *int    // Initial offset for pagination
	Limit     *int    // Number of rows to fetch per batch
	MaxRows    *int
}

type Cursor struct {
	pool      querier 
	builder   sq.SelectBuilder
	rows      []{{.MessageName}}
	index     int
	offset    int
	limit     int
	params    BuilderParams
	ctx       context.Context
	totalRows int 
	closed    bool 
}

type Query interface {
	Get(ctx context.Context, opts ...FilterOpt) (*{{.MessageName}}, error)
	GetMany(ctx context.Context, opts ...FilterOpt) (generics.SliceOps[{{.MessageName}}], error)
	Has(ctx context.Context, opts ...FilterOpt) (bool, error)
	GetIterator(ctx context.Context, opts ...FilterOpt) generics.IterWithErr[{{.MessageName}}]
	Count(ctx context.Context, opts ...FilterOpt) (int, error)
	NewCursor(ctx context.Context, params BuilderParams, opts ...FilterOpt) *Cursor
}

type Command interface {
	Query
	Create(ctx context.Context, model *{{.MessageName}}) error
	CreateMany(ctx context.Context, {{.MessageName | lower}}s []{{.MessageName}}) error
	Update(ctx context.Context, u Update, opts ...FilterOpt) error
	Upsert(ctx context.Context, model *{{.MessageName}}) error
	{{- if and .HasIDField .SupportsSave}}
	Save(ctx context.Context, model *{{.MessageName}}) error
	{{- end}}
	Delete(ctx context.Context, opts ...FilterOpt) error
}
